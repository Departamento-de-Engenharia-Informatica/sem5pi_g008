<div class="algav-container">
  <h1>Surgery Plan</h1>

  <!-- Formulário para inserir dados de busca -->
  <form (ngSubmit)="searchSurgeryPlan()" #surgeryForm="ngForm" class="search-form">
    <div class="form-group">
      <label for="date">Date:</label>
      <input
        type="text"
        id="date"
        name="date"
        [(ngModel)]="formData.date"
        placeholder="Enter date (YYYYMMDD)"
        class="form-control"
        required
      />
    </div>

    <div class="form-group">
      <label for="room">Room ID:</label>
      <input
        type="text"
        id="room"
        name="room"
        [(ngModel)]="formData.room"
        placeholder="Enter room ID"
        class="form-control"
        required
      />
    </div>

    <div class="button-group">
      <button type="submit" class="btn btn-primary">Search Surgery Plan</button>
      <button type="button" (click)="loadData()" class="btn btn-secondary">Load Data</button>
      <button type="button" (click)="getData()" class="btn btn-secondary">Get Data</button>
      <button type="button" (click)="savedata()" class="btn btn-secondary">Save Data</button>


    </div>
  </form>


  <!-- Tabela de dados do plano de cirurgia -->
  <div *ngIf="surgeryPlan.solutions && surgeryPlan.solutions.length > 0; else noDataSurgeryPlan">
    <table class="surgery-table">
      <thead>
      <tr>
        <th>#</th>
        <th>Surgery ID</th>
        <th>Start Time</th>
        <th>End Time</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let solution of surgeryPlan.solutions; let i = index">
        <td>{{ i + 1 }}</td>
        <td>{{ solution.surgery_id }}</td>
        <td>{{ solution.start_time }}</td>
        <td>{{ solution.end_time }}</td>
      </tr>
      </tbody>
    </table>
  </div>

  <!-- Tabela de dados de agendamento de sala -->
  <div *ngIf="agenda.agendaroomlist && agenda.agendaroomlist.length > 0; else noDataRoomSchedule">
    <table class="surgery-table">
      <thead>
      <tr>
        <th>#</th>
        <th>Date</th>
        <th>Room ID</th>
        <th>Tasks</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let agendaroomlist of agenda.agendaroomlist; let i = index">
        <td>{{ i + 1 }}</td>
        <td>{{ agendaroomlist.date }}</td>
        <td>{{ agendaroomlist.room_id }}</td>
        <td>
          <ul>
            <li *ngFor="let task of agendaroomlist.tasks">
              Operation Request Id: {{ task.code }}, Start: {{ task.start }}, End: {{ task.end }}
            </li>
          </ul>
        </td>
      </tr>
      </tbody>
    </table>
  </div>

  <!-- Tabela de dados de agendamento de equipe -->
  <div *ngIf="agenda.agendastafflist && agenda.agendastafflist.length > 0; else noDataStaffSchedule">
    <table class="surgery-table">
      <thead>
      <tr>
        <th>#</th>
        <th>Date</th>
        <th>Staff Id</th>
        <th>Tasks</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let agendastafflist of agenda.agendastafflist; let i = index">
        <td>{{ i + 1 }}</td>
        <td>{{ agendastafflist.date }}</td>
        <td>{{ agendastafflist.staff_id }}</td>
        <td>
          <ul>
            <li *ngFor="let task of agendastafflist.tasks">
              Operation Request Id: {{ task.code }}, Start: {{ task.start }}, End: {{ task.end }}
            </li>
          </ul>
        </td>
      </tr>
      </tbody>
    </table>
  </div>

  <!-- Caso não haja dados - Mensagens personalizadas -->
  <ng-template #noDataSurgeryPlan>
    <p><strong>No surgery plans found. Please load or search for data.</strong></p>
  </ng-template>

  <ng-template #noDataRoomSchedule>
    <p><strong>No room schedules available. Please load or search for data.</strong></p>
  </ng-template>

  <ng-template #noDataStaffSchedule>
    <p><strong>No staff schedules found. Please load or search for data.</strong></p>
  </ng-template>
</div>
